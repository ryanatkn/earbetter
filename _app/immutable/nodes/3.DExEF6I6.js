import{c as o,s as e,a as y,t as E,r as s,b as D,n as ve,e as ae,f as se,v as de,w as ue,x as me}from"../chunks/disclose-version.wE5PaFVB.js";import{p as Y,t as C,a as q,g as c,d as ne,h as O,D as ce,s as X}from"../chunks/index-client.DEO7R3f7.js";import{p as V,i as J,a as z}from"../chunks/props.BV_xrcCh.js";import{s as m,r as F,t as pe,e as Q,b as ge}from"../chunks/style.BI6wc9N8.js";import{M as fe,B as be,b as xe,P as he}from"../chunks/Back_Button.Cqf42fDe.js";import{a as H,b as N,m as U,t as ye,c as ke,l as $e,d as we,p as Ie,e as Z,g as Me,z as Ae,f as ee,h as Be,j as Ce,k as te,n as De,w as Ee,o as Pe}from"../chunks/index.iDyXrGz-.js";import{g as Se,b as Te}from"../chunks/entry.BJnwl1ov.js";import{b as R,i as je,a as ze,s as Fe,I as He,V as Ne,c as Re}from"../chunks/Init_Midi_Button.Cud-EqOH.js";import{H as Ve}from"../chunks/Header.BpS8zr6-.js";import{F as We}from"../chunks/Footer.D5quXvKo.js";import{A as Ge}from"../chunks/Alert.BGsf62ub.js";var Ke=E("<div><!></div>"),Oe=E('<div class="midi-range-control"><div class="box row"><label class="text_align_center"><div class="title">lowest note</div> <div> </div> <input type="range"> <input type="number"></label> <label class="text_align_center"><div class="title">highest note</div> <div> </div> <input type="range"> <input type="number"></label></div> <!></div>');function Xe(k,p){Y(p,!0);let t=V(p,"min_note",15),d=V(p,"max_note",15);const h=ne(()=>t()>d()?"note min cannot be larger than the max":!1);var g=Oe(),f=o(g),_=o(f),w=o(_),$=e(e(w,!0)),P=o($);s($);var u=e(e($,!0));F(u),m(u,"step",1),m(u,"min",H),m(u,"max",N);var n=e(e(u,!0));F(n),m(n,"step",1),m(n,"min",H),m(n,"max",N),s(_);var r=e(e(_,!0)),I=o(r),i=e(e(I,!0)),b=o(i);s(i);var v=e(e(i,!0));F(v),m(v,"step",1),m(v,"min",H),m(v,"max",N);var x=e(e(v,!0));F(x),m(x,"step",1),m(x,"min",H),m(x,"max",N),s(r),s(f);var M=e(e(f,!0));J(M,()=>c(h),l=>{var A=Ke(),S=o(A);Ge(S,{status:"error",children:(T,W)=>{ve();var B=ae();C(()=>D(B,c(h))),y(T,B)},$$slots:{default:!0}}),s(A),ye(3,A,()=>ke),y(l,A)}),s(g),C(()=>{pe(g,"error",!!c(h)),D(P,U[t()]),D(b,U[d()])}),R(u,t,l=>t(l)),R(n,t,l=>t(l)),R(v,d,l=>d(l)),R(x,d,l=>d(l)),y(k,g),q()}var Ye=(k,p)=>p($e(k.currentTarget.value)),qe=E("<option> </option>"),Je=E("<option> <!></option>"),Le=E('<label class="text_align_center svelte-199vc6u"><div class="title">scale</div> <select></select></label> <label class="text_align_center svelte-199vc6u"><div class="title">key</div> <select></select></label>',1);function Qe(k,p){Y(p,!0);let t=V(p,"scale",15),d=V(p,"key",15);var h=Le(),g=se(h),f=o(g),_=e(e(f,!0));je(_,()=>t().name);var w;_.__input=[Ye,t],Q(_,20,()=>we,(n,r)=>n,(n,r,I)=>{var i=qe(),b={},v=o(i);s(i),C(()=>{b!==(b=r.name)&&(i.value=(i.__value=r.name)==null?"":r.name),D(v,r.name)}),y(n,i)}),s(_),s(g);var $=e(e(g,!0)),P=o($),u=e(e(P,!0));Q(u,20,()=>Ie,(n,r)=>n,(n,r,I)=>{var i=Je(),b={},v=o(i),x=e(v);J(x,()=>r in Z,M=>{var l=ae();C(()=>D(l,`/${Z[r]??""}`)),y(M,l)}),s(i),C(()=>{b!==(b=r)&&(i.value=(i.__value=r)==null?"":r),D(v,r)}),y(n,i)}),s(u),s($),C(()=>{w!==(w=t().name)&&(_.value=(_.__value=t().name)==null?"":t().name,Fe(_,t().name))}),ze(u,d,n=>d(n)),y(k,h),q()}de(["input"]);var Ue=E('<!> <main class="svelte-3fkhg9"><!> <!> <div class="piano_wrapper svelte-3fkhg9"><!></div> <form class="width_sm panel p_md"><fieldset><!> <div class="row mb_lg"><!></div> <!></fieldset> <fieldset><!></fieldset> <fieldset class="row"><!></fieldset></form> <!></main>',1);function vt(k,p){Y(p,!0);const t=Me(),d=Ae.object({min_note:ee.default(36),max_note:ee.default(96)}),h="piano",g=Be(h,()=>d.parse({}),d.parse);let f=O(z(g.min_note)),_=O(z(g.max_note));const w=()=>({min_note:c(f),max_note:c(_)});ce(()=>Pe(h,w()));const P=Ce(),{playing_notes:u}=t;let n=O(void 0);const r=20,I=(a,j=null)=>{(!t.enabled_notes||t.enabled_notes.has(a))&&De(t,P(),a,Ee(t.volume,j),t.instrument)};var i=Ue();ue(a=>{me.title="Earbetter: piano"});var b=se(i);fe(b,{get midi_access(){return t.midi_access},onnotestart:(a,j)=>I(a,j),onnotestop:a=>te(a)});var v=e(e(b,!0)),x=o(v);be(x,{onclick:()=>Se(Te+"/")});var M=e(e(x,!0));Ve(M);var l=e(e(M,!0));ge(l,"padding",`${r}px`);var A=o(l);J(A,()=>c(n),a=>{var j=ne(()=>c(n)-r*2);he(a,{get width(){return c(j)},get min_note(){return c(f)},get max_note(){return c(_)},pressed_keys:u,get enabled_notes(){return t.enabled_notes},onpress:K=>I(K),onrelease:K=>te(K),middle_c_label:!0,allow_sticking:!0})}),s(l);var S=e(e(l,!0)),T=o(S),W=o(T);He(W,{get instrument(){return t.instrument},set instrument(a){t.instrument=a}});var B=e(e(W,!0)),re=o(B);Qe(re,{get scale(){return t.scale},set scale(a){t.scale=a},get key(){return t.key},set key(a){t.key=a}}),s(B);var ie=e(e(B,!0));Ne(ie,{get volume(){return t.volume},set volume(a){t.volume=a}}),s(T);var G=e(e(T,!0)),oe=o(G);Re(oe,{midi_state:t}),s(G);var L=e(e(G,!0)),le=o(L);Xe(le,{get min_note(){return c(f)},set min_note(a){X(f,z(a))},get max_note(){return c(_)},set max_note(a){X(_,z(a))}}),s(L),s(S);var _e=e(e(S,!0));We(_e,{}),s(v),xe(v,"clientWidth",a=>X(n,a)),y(k,i),q()}export{vt as component};
