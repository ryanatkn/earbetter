import{c as o,s as e,a as k,t as S,r as s,b as P,n as de,e as se,f as ne,u as ue,v as me,w as ce}from"../chunks/disclose-version.C5EwI3-V.js";import{p as q,t as E,a as J,g as p,d as re,H as m,j as X,F as pe,s as Y}from"../chunks/index-client.Cqv4GYu1.js";import{p as W,i as L,a as H}from"../chunks/props.DNuZbuIM.js";import{s as c,r as z,t as ge,e as U,b as fe}from"../chunks/style.BTM4hw-r.js";import{M as be,B as xe,b as he,P as ye}from"../chunks/Back_Button.4fGAbACb.js";import{a as N,b as R,m as Z,t as ke,c as we,l as $e,d as Ie,p as Me,e as ee,g as Ae,z as Be,f as te,h as Ce,j as Ee,k as ae,n as Pe,w as Se,o as Te}from"../chunks/index.C9T6NC4Z.js";import{g as je,b as De}from"../chunks/entry.HP2IVuuU.js";import{b as V,i as Fe,a as He,s as ze,I as Ne,V as Re,c as Ve}from"../chunks/Init_Midi_Button.DfEVlMUw.js";import{H as We}from"../chunks/Header.DqijK6t5.js";import{F as Ge}from"../chunks/Footer.Bu-2ipH0.js";import{A as Ke}from"../chunks/Alert.BnMwJceV.js";var Oe=S("<div><!></div>"),Xe=S('<div class="midi-range-control"><div class="box row"><label class="text_align_center"><div class="title">lowest note</div> <div> </div> <input type="range"> <input type="number"></label> <label class="text_align_center"><div class="title">highest note</div> <div> </div> <input type="range"> <input type="number"></label></div> <!></div>');function Ye(w,g){q(g,!0);let t=W(g,"min_note",7),d=W(g,"max_note",7);const y=re(()=>t()>d()?"note min cannot be larger than the max":!1);var f=Xe(),b=o(f),_=o(b),I=o(_),$=e(e(I,!0)),T=o($);s($);var u=e(e($,!0));z(u),c(u,"step",1),c(u,"min",N),c(u,"max",R);var n=e(e(u,!0));z(n),c(n,"step",1),c(n,"min",N),c(n,"max",R),s(_);var r=e(e(_,!0)),M=o(r),i=e(e(M,!0)),x=o(i);s(i);var v=e(e(i,!0));z(v),c(v,"step",1),c(v,"min",N),c(v,"max",R);var h=e(e(v,!0));z(h),c(h,"step",1),c(h,"min",N),c(h,"max",R),s(r),s(b);var A=e(e(b,!0));L(A,()=>p(y),l=>{var B=Oe(),j=o(B);Ke(j,{status:"error",children:(D,G)=>{de();var C=se();E(()=>P(C,p(y))),k(D,C)},$$slots:{default:!0}}),s(B),ke(3,B,()=>we),k(l,B)}),s(f),E(()=>{ge(f,"error",!!p(y)),P(T,Z[t()]),P(x,Z[d()])}),V(u,t,l=>t(l)),V(n,t,l=>t(l)),V(v,d,l=>d(l)),V(h,d,l=>d(l)),k(w,f),J()}var qe=(w,g)=>g($e(w.currentTarget.value)),Je=S("<option> </option>"),Le=S("<option> <!></option>"),Qe=S('<label class="text_align_center svelte-199vc6u"><div class="title">scale</div> <select></select></label> <label class="text_align_center svelte-199vc6u"><div class="title">key</div> <select></select></label>',1);function Ue(w,g){q(g,!0);let t=W(g,"scale",7),d=W(g,"key",7);var y=Qe(),f=ne(y),b=o(f),_=e(e(b,!0));Fe(_,()=>t().name);var I;_.__input=[qe,t],U(_,76,()=>Ie,(n,r)=>m(n),(n,r,M)=>{var i=Je(),x={},v=o(i);s(i),E(()=>{x!==(x=m(r).name)&&(i.value=(i.__value=m(r).name)==null?"":m(r).name),P(v,m(r).name)}),k(n,i)}),s(_),s(f);var $=e(e(f,!0)),T=o($),u=e(e(T,!0));U(u,76,()=>Me,(n,r)=>m(n),(n,r,M)=>{var i=Le(),x={},v=o(i),h=e(v);L(h,()=>m(r)in ee,A=>{var l=se();E(()=>P(l,`/${ee[m(r)]??""}`)),k(A,l)}),s(i),E(()=>{x!==(x=m(r))&&(i.value=(i.__value=m(r))==null?"":m(r)),P(v,m(r))}),k(n,i)}),s(u),s($),E(()=>{I!==(I=t().name)&&(_.value=(_.__value=t().name)==null?"":t().name,ze(_,t().name))}),He(u,d,n=>d(n)),k(w,y),J()}ue(["input"]);var Ze=S('<!> <main class="svelte-3fkhg9"><!> <!> <div class="piano_wrapper svelte-3fkhg9"><!></div> <form class="width_sm panel p_md"><fieldset><!> <div class="row mb_lg"><!></div> <!></fieldset> <fieldset><!></fieldset> <fieldset class="row"><!></fieldset></form> <!></main>',1);function dt(w,g){q(g,!0);const t=Ae(),d=Be.object({min_note:te.default(36),max_note:te.default(96)}),y="piano",f=Ce(y,()=>d.parse({}),d.parse);let b=X(H(f.min_note)),_=X(H(f.max_note));const I=()=>({min_note:p(b),max_note:p(_)});pe(()=>Te(y,I()));const T=Ee(),{playing_notes:u}=t;let n=X(void 0);const r=20,M=(a,F=null)=>{(!t.enabled_notes||t.enabled_notes.has(a))&&Pe(t,T(),a,Se(t.volume,F),t.instrument)};var i=Ze();me(a=>{ce.title="Earbetter: piano"});var x=ne(i);be(x,{get midi_access(){return t.midi_access},onnotestart:(a,F)=>M(a,F),onnotestop:a=>ae(a)});var v=e(e(x,!0)),h=o(v);xe(h,{onclick:()=>je(De+"/")});var A=e(e(h,!0));We(A);var l=e(e(A,!0));fe(l,"padding",`${r}px`);var B=o(l);L(B,()=>p(n),a=>{var F=re(()=>p(n)-r*2);ye(a,{get width(){return p(F)},get min_note(){return p(b)},get max_note(){return p(_)},pressed_keys:u,get enabled_notes(){return t.enabled_notes},onpress:O=>M(O),onrelease:O=>ae(O),middle_c_label:!0,allow_sticking:!0})}),s(l);var j=e(e(l,!0)),D=o(j),G=o(D);Ne(G,{get instrument(){return t.instrument},set instrument(a){t.instrument=a}});var C=e(e(G,!0)),ie=o(C);Ue(ie,{get scale(){return t.scale},set scale(a){t.scale=a},get key(){return t.key},set key(a){t.key=a}}),s(C);var oe=e(e(C,!0));Re(oe,{get volume(){return t.volume},set volume(a){t.volume=a}}),s(D);var K=e(e(D,!0)),le=o(K);Ve(le,{midi_state:t}),s(K);var Q=e(e(K,!0)),_e=o(Q);Ye(_e,{get min_note(){return p(b)},set min_note(a){Y(b,H(a))},get max_note(){return p(_)},set max_note(a){Y(_,H(a))}}),s(Q),s(j);var ve=e(e(j,!0));Ge(ve,{}),s(v),he(v,"clientWidth",a=>Y(n,a)),k(w,i),J()}export{dt as component};
