import{c as y,r as h,a as O,t as R,u as H,$ as J,s as I,d as K,f as M,v as Q}from"./disclose-version.wE5PaFVB.js";import{p as A,D as P,g as t,s as r,F as U,t as S,a as q,h as m}from"./index-client.DEO7R3f7.js";import{p as k,a as D,i as V}from"./props.BV_xrcCh.js";import{c as B,t as N,b as W}from"./style.BI6wc9N8.js";import{b as T}from"./this.CUByJSBG.js";import{s as X,i as Y}from"./index.jMwpDgf2.js";const Z=(l=0)=>new Promise(e=>setTimeout(e,l));var $=R('<div class="teleport svelte-gjkzv5"><!></div>');function ee(l,e){A(e,!0);let d=m(void 0);P(()=>{t(d)&&e.to&&j(t(d),e.to)});let w=m(!1);const j=(o,c)=>{var v;r(w,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};U(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var s=$();T(s,o=>r(d,o),()=>t(d));var b=y(s);B(b,()=>e.children),h(s),S(()=>s.hidden=!t(w)),O(l,s),q()}var te=(l,e,d)=>{l.target===t(e)&&d(l)},ae=R('<div class="dialog svelte-161ujlb" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-161ujlb"><div class="dialog_wrapper svelte-161ujlb"><div class="dialog_bg svelte-161ujlb" aria-hidden="true"></div> <div class="dialog_content svelte-161ujlb" role="none"><!></div></div></div></div>');function re(l,e){A(e,!0);const d=k(e,"layout",3,"centered"),w=k(e,"index",3,0),j=k(e,"active",3,!0),s="body",b="fuz_dialog";let o=m(void 0);P(()=>{c(e.container)});const c=a=>{if(a)r(o,D(a));else{const i=document.getElementById(b);if(i)r(o,D(i));else{const n=document.querySelector(s);if(!n)throw Error(`Cannot find dialog root element with selector '${s}'`);r(o,D(document.createElement("div"))),t(o).id=b,t(o).style.display="contents",n.appendChild(t(o))}}};let v=m(void 0),p=m(void 0);const E=a=>{var i;a&&X(a),(i=e.onclose)==null||i.call(e)},F=a=>{var i,n;if(a.key==="Escape"&&!Y(a.target)){const u=(i=t(v))==null?void 0:i.parentElement,f=(n=u==null?void 0:u.parentElement)==null?void 0:n.children,_=Array.prototype.indexOf.call(f,u);(!f||_===f.length-1||_===-1)&&E(a)}};let C=m(!1);H("keydown",J,function(...a){var i;(i=j()?F:void 0)==null||i.apply(this,a)}),ee(l,{get to(){return t(o)},onmove:async()=>{var a;await Z(),r(C,!0),(a=t(v))==null||a.focus()},children:(a,i)=>{var n=ae();T(n,g=>r(v,g),()=>t(v));var u=y(n),f=y(u),_=y(f);_.__mousedown=E;var x=I(I(_,!0));T(x,g=>r(p,g),()=>t(p)),x.__mousedown=[te,p,E];var L=y(x);V(L,()=>t(C),g=>{var z=K(),G=M(z);B(G,()=>e.children,()=>E),O(g,z)}),h(x),h(f),h(u),h(n),S(()=>{N(n,"ready",t(C)),N(n,"layout_page",d()==="page"),W(n,"z-index",100+w())}),O(a,n)},$$slots:{default:!0}}),q()}Q(["mousedown"]);export{re as D};
