import{a as D,t as R,g as G,d as H,h as J}from"./disclose-version.BKNlT-YU.js";import{p as A,$ as P,g as t,k as r,a0 as K,c as y,r as h,t as S,a as j,a1 as u,a2 as M,s as Q,f as U}from"./index-client.BoyXeee0.js";import{p as O,a as T,i as V}from"./props.D3HXCBXF.js";import{a as q,t as N,c as W}from"./string.CDuhMoWR.js";import{b as z}from"./this.DQxifKK9.js";import{s as X,i as Y}from"./index.B-bFX673.js";const Z=(s=0)=>new Promise(e=>setTimeout(e,s));var $=R('<div class="teleport svelte-gjkzv5"><!></div>');function ee(s,e){A(e,!0);let d=u(void 0);P(()=>{t(d)&&e.to&&k(t(d),e.to)});let w=u(!1);const k=(o,c)=>{var v;r(w,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};K(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var l=$();z(l,o=>r(d,o),()=>t(d));var x=y(l);q(x,()=>e.children),h(l),S(()=>l.hidden=!t(w)),D(s,l),j()}var te=(s,e,d)=>{s.target===t(e)&&d(s)},ae=R('<div class="dialog svelte-2t3xer" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-2t3xer"><div class="dialog_wrapper svelte-2t3xer"><div class="dialog_bg svelte-2t3xer" aria-hidden="true"></div> <div class="dialog_content svelte-2t3xer" role="none"><!></div></div></div></div>');function re(s,e){A(e,!0);const d=O(e,"layout",3,"centered"),w=O(e,"index",3,0),k=O(e,"active",3,!0),l="body",x="fuz_dialog";let o=u(void 0);P(()=>{c(e.container)});const c=a=>{if(a)r(o,T(a));else{const i=document.getElementById(x);if(i)r(o,T(i));else{const n=document.querySelector(l);if(!n)throw Error(`Cannot find dialog root element with selector '${l}'`);r(o,T(document.createElement("div"))),t(o).id=x,t(o).style.display="contents",n.appendChild(t(o))}}};let v=u(void 0),p=u(void 0);const E=a=>{var i;a&&X(a),(i=e.onclose)==null||i.call(e)},B=a=>{var i,n;if(a.key==="Escape"&&!Y(a.target)){const f=(i=t(v))==null?void 0:i.parentElement,m=(n=f==null?void 0:f.parentElement)==null?void 0:n.children,_=Array.prototype.indexOf.call(m,f);(!m||_===m.length-1||_===-1)&&E(a)}};let C=u(!1);G("keydown",M,function(...a){var i;(i=k()?B:void 0)==null||i.apply(this,a)}),ee(s,{get to(){return t(o)},onmove:async()=>{var a;await Z(),r(C,!0),(a=t(v))==null||a.focus()},children:(a,i)=>{var n=ae();z(n,g=>r(v,g),()=>t(v));var f=y(n),m=y(f),_=y(m);_.__mousedown=E;var b=Q(_,2);z(b,g=>r(p,g),()=>t(p)),b.__mousedown=[te,p,E];var L=y(b);V(L,()=>t(C),g=>{var I=H(),F=U(I);q(F,()=>e.children,()=>E),D(g,I)}),h(b),h(m),h(f),h(n),S(()=>{N(n,"ready",t(C)),N(n,"layout_page",d()==="page"),W(n,"z-index",100+w())}),D(a,n)},$$slots:{default:!0}}),j()}J(["mousedown"]);export{re as D};
