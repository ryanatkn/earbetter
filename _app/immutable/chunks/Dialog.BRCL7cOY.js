import{a as D,t as R,g as F,d as G,h as H}from"./disclose-version.DbIX9lBU.js";import{a as A,Y as P,g as t,k as r,Z as J,c as y,r as h,t as S,p as j,_,$ as K,s as M,f as Q}from"./index-client.BoISVktJ.js";import{p as O,a as T,i as U}from"./props.Dc3VY8m1.js";import{c as q,t as N,b as V}from"./string.CP9_p8aN.js";import{b as z}from"./this.Clzg12Qd.js";import{s as W,i as X}from"./index.DY9TdQ-H.js";const $=(s=0)=>new Promise(e=>setTimeout(e,s));var ee=R('<div class="teleport svelte-gjkzv5"><!></div>');function te(s,e){A(e,!0);let d=_(void 0);P(()=>{t(d)&&e.to&&k(t(d),e.to)});let w=_(!1);const k=(o,c)=>{var v;r(w,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};J(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var l=ee(),x=y(l);q(x,()=>e.children),h(l),z(l,o=>r(d,o),()=>t(d)),S(()=>l.hidden=!t(w)),D(s,l),j()}var ae=(s,e,d)=>{s.target===t(e)&&d(s)},oe=R('<div class="dialog svelte-2t3xer" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-2t3xer"><div class="dialog_wrapper svelte-2t3xer"><div class="dialog_bg svelte-2t3xer" aria-hidden="true"></div> <div class="dialog_content svelte-2t3xer" role="none"><!></div></div></div></div>');function ce(s,e){A(e,!0);const d=O(e,"layout",3,"centered"),w=O(e,"index",3,0),k=O(e,"active",3,!0),l="body",x="fuz_dialog";let o=_(void 0);P(()=>{c(e.container)});const c=a=>{if(a)r(o,T(a));else{const i=document.getElementById(x);if(i)r(o,T(i));else{const n=document.querySelector(l);if(!n)throw Error(`Cannot find dialog root element with selector '${l}'`);r(o,T(document.createElement("div"))),t(o).id=x,t(o).style.display="contents",n.appendChild(t(o))}}};let v=_(void 0),p=_(void 0);const b=a=>{var i;a&&W(a),(i=e.onclose)==null||i.call(e)},B=a=>{var i,n;if(a.key==="Escape"&&!X(a.target)){const f=(i=t(v))==null?void 0:i.parentElement,u=(n=f==null?void 0:f.parentElement)==null?void 0:n.children,g=Array.prototype.indexOf.call(u,f);(!u||g===u.length-1||g===-1)&&b(a)}};let C=_(!1);F("keydown",K,function(...a){var i;(i=k()?B:void 0)==null||i.apply(this,a)}),te(s,{get to(){return t(o)},onmove:async()=>{var a;await $(),r(C,!0),(a=t(v))==null||a.focus()},children:(a,i)=>{var n=oe(),f=y(n),u=y(f),g=y(u);g.__mousedown=b;var E=M(g,2);E.__mousedown=[ae,p,b];var L=y(E);{var Y=m=>{var I=G(),Z=Q(I);q(Z,()=>e.children,()=>b),D(m,I)};U(L,m=>{t(C)&&m(Y)})}h(E),z(E,m=>r(p,m),()=>t(p)),h(u),h(f),h(n),z(n,m=>r(v,m),()=>t(v)),S(()=>{N(n,"ready",t(C)),N(n,"layout_page",d()==="page"),V(n,"z-index",100+w())}),D(a,n)},$$slots:{default:!0}}),j()}H(["mousedown"]);export{ce as D};
