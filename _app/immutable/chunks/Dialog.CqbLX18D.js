import{c as w,r as h,a as D,t as j,q as H,$ as J,s as N,d as K,f as M,u as Q}from"./disclose-version.C5EwI3-V.js";import{p as q,F as A,g as t,s as r,G as U,t as P,a as S,j as _}from"./index-client.Cqv4GYu1.js";import{a as m,p as k,i as V}from"./props.DNuZbuIM.js";import{c as B,t as R,b as W}from"./style.BTM4hw-r.js";import{b as z}from"./this.D7faLO31.js";import{s as X,i as Y}from"./index.DT_0GC09.js";const Z=(s=0)=>new Promise(e=>setTimeout(e,s));var $=j('<div class="teleport svelte-gjkzv5"><!></div>');function ee(s,e){q(e,!0);let d=_(void 0);A(()=>{t(d)&&e.to&&C(t(d),e.to)});let E=_(!1);const C=(n,c)=>{var v;r(E,!0),c.appendChild(n),(v=e.onmove)==null||v.call(e,n,c)};U(()=>{var n,c;(c=(n=t(d))==null?void 0:n.parentNode)==null||c.removeChild(t(d))});var l=$();z(l,n=>r(d,m(n)),()=>t(d));var b=w(l);B(b,()=>e.children),h(l),P(()=>l.hidden=!t(E)),D(s,l),S()}var te=(s,e,d)=>{s.target===t(e)&&d(s)},ae=j('<div class="dialog svelte-n45e52" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-n45e52"><div class="dialog_wrapper svelte-n45e52"><div class="dialog_bg svelte-n45e52" aria-hidden="true"></div> <div class="dialog_content svelte-n45e52" role="none"><!></div></div></div></div>');function re(s,e){q(e,!0);const d=k(e,"layout",3,"centered"),E=k(e,"index",3,0),C=k(e,"active",3,!0),l="body",b="fuz_dialog";let n=_(void 0);A(()=>{c(e.container)});const c=a=>{if(a)r(n,m(a));else{const o=document.getElementById(b);if(o)r(n,m(o));else{const i=document.querySelector(l);if(!i)throw Error(`Cannot find dialog root element with selector '${l}'`);r(n,m(document.createElement("div"))),t(n).id=b,t(n).style.display="contents",i.appendChild(t(n))}}};let v=_(void 0),O=_(void 0);const x=a=>{var o;a&&X(a),(o=e.onclose)==null||o.call(e)},F=a=>{var o,i;if(a.key==="Escape"&&!Y(a.target)){const u=(o=t(v))==null?void 0:o.parentElement,f=(i=u==null?void 0:u.parentElement)==null?void 0:i.children,g=Array.prototype.indexOf.call(f,u);(!f||g===f.length-1||g===-1)&&x(a)}};let T=_(!1);H("keydown",J,function(...a){const o=C()?F:void 0;return o==null?void 0:o.apply(this,a)},!1),ee(s,{get to(){return t(n)},onmove:async()=>{var a;await Z(),r(T,!0),(a=t(v))==null||a.focus()},children:(a,o)=>{var i=ae();z(i,y=>r(v,m(y)),()=>t(v));var u=w(i),f=w(u),g=w(f);g.__mousedown=x;var p=N(N(g,!0));z(p,y=>r(O,m(y)),()=>t(O)),p.__mousedown=[te,O,x];var G=w(p);V(G,()=>t(T),y=>{var I=K(),L=M(I);B(L,()=>e.children,()=>x),D(y,I)}),h(p),h(f),h(u),h(i),P(()=>{R(i,"ready",t(T)),R(i,"layout_page",d()==="page"),W(i,"z-index",100+E())}),D(a,i)},$$slots:{default:!0}}),S()}Q(["mousedown"]);export{re as D};
