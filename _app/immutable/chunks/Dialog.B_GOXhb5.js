import{c as y,r as h,a as T,t as A,u as H,$ as J,s as N,d as K,f as M,v as Q}from"./disclose-version.wE5PaFVB.js";import{p as P,D as S,g as t,s as r,F as U,t as j,a as q,h as m}from"./index-client.DEO7R3f7.js";import{p as D,a as O,i as V}from"./props.BV_xrcCh.js";import{c as B,t as R,b as W}from"./style.BI6wc9N8.js";import{b as z}from"./this.CUByJSBG.js";import{s as X,i as Y}from"./index.CNW-Efzb.js";const Z=(s=0)=>new Promise(e=>setTimeout(e,s));var $=A('<div class="teleport svelte-gjkzv5"><!></div>');function ee(s,e){P(e,!0);let d=m(void 0);S(()=>{t(d)&&e.to&&p(t(d),e.to)});let w=m(!1);const p=(o,c)=>{var v;r(w,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};U(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var l=$();z(l,o=>r(d,o),()=>t(d));var b=y(l);B(b,()=>e.children),h(l),j(()=>l.hidden=!t(w)),T(s,l),q()}var te=(s,e,d)=>{s.target===t(e)&&d(s)},ae=A('<div class="dialog svelte-7gv63e" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-7gv63e"><div class="dialog_wrapper svelte-7gv63e"><div class="dialog_bg svelte-7gv63e" aria-hidden="true"></div> <div class="dialog_content svelte-7gv63e" role="none"><!></div></div></div></div>');function re(s,e){P(e,!0);const d=D(e,"layout",3,"centered"),w=D(e,"index",3,0),p=D(e,"active",3,!0),l="body",b="fuz_dialog";let o=m(void 0);S(()=>{c(e.container)});const c=a=>{if(a)r(o,O(a));else{const i=document.getElementById(b);if(i)r(o,O(i));else{const n=document.querySelector(l);if(!n)throw Error(`Cannot find dialog root element with selector '${l}'`);r(o,O(document.createElement("div"))),t(o).id=b,t(o).style.display="contents",n.appendChild(t(o))}}};let v=m(void 0),C=m(void 0);const E=a=>{var i;a&&X(a),(i=e.onclose)==null||i.call(e)},F=a=>{var i,n;if(a.key==="Escape"&&!Y(a.target)){const u=(i=t(v))==null?void 0:i.parentElement,f=(n=u==null?void 0:u.parentElement)==null?void 0:n.children,_=Array.prototype.indexOf.call(f,u);(!f||_===f.length-1||_===-1)&&E(a)}};let k=m(!1);H("keydown",J,function(...a){var i;(i=p()?F:void 0)==null||i.apply(this,a)}),ee(s,{get to(){return t(o)},onmove:async()=>{var a;await Z(),r(k,!0),(a=t(v))==null||a.focus()},children:(a,i)=>{var n=ae();z(n,g=>r(v,g),()=>t(v));var u=y(n),f=y(u),_=y(f);_.__mousedown=E;var x=N(N(_,!0));z(x,g=>r(C,g),()=>t(C)),x.__mousedown=[te,C,E];var L=y(x);V(L,()=>t(k),g=>{var I=K(),G=M(I);B(G,()=>e.children,()=>E),T(g,I)}),h(x),h(f),h(u),h(n),j(()=>{R(n,"ready",t(k)),R(n,"layout_page",d()==="page"),W(n,"z-index",100+w())}),T(a,n)},$$slots:{default:!0}}),q()}Q(["mousedown"]);export{re as D};
