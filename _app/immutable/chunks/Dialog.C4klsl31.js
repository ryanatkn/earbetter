import{a as D,t as R,e as Z,c as F,d as G}from"./disclose-version.t6-SPuTG.js";import{p as j,Y as A,g as t,j as r,Z as H,c as y,r as w,t as P,a as S,v as m,$ as J,s as K,f as M}from"./index-client.tN2euk7f.js";import{p as O,a as T,i as Q}from"./props.CjJeOVXC.js";import{c as q,t as N,b as U}from"./style.DXnKmRQF.js";import{b as z}from"./this.CS9gFwL7.js";import{s as V,i as W}from"./index.CB5o2D_M.js";const X=(s=0)=>new Promise(e=>setTimeout(e,s));var $=R('<div class="teleport svelte-gjkzv5"><!></div>');function ee(s,e){j(e,!0);let d=m(void 0);A(()=>{t(d)&&e.to&&p(t(d),e.to)});let h=m(!1);const p=(o,c)=>{var v;r(h,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};H(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var l=$();z(l,o=>r(d,o),()=>t(d));var b=y(l);q(b,()=>e.children),w(l),P(()=>l.hidden=!t(h)),D(s,l),S()}var te=(s,e,d)=>{s.target===t(e)&&d(s)},ae=R('<div class="dialog svelte-7gv63e" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-7gv63e"><div class="dialog_wrapper svelte-7gv63e"><div class="dialog_bg svelte-7gv63e" aria-hidden="true"></div> <div class="dialog_content svelte-7gv63e" role="none"><!></div></div></div></div>');function re(s,e){j(e,!0);const d=O(e,"layout",3,"centered"),h=O(e,"index",3,0),p=O(e,"active",3,!0),l="body",b="fuz_dialog";let o=m(void 0);A(()=>{c(e.container)});const c=a=>{if(a)r(o,T(a));else{const i=document.getElementById(b);if(i)r(o,T(i));else{const n=document.querySelector(l);if(!n)throw Error(`Cannot find dialog root element with selector '${l}'`);r(o,T(document.createElement("div"))),t(o).id=b,t(o).style.display="contents",n.appendChild(t(o))}}};let v=m(void 0),C=m(void 0);const E=a=>{var i;a&&V(a),(i=e.onclose)==null||i.call(e)},B=a=>{var i,n;if(a.key==="Escape"&&!W(a.target)){const f=(i=t(v))==null?void 0:i.parentElement,u=(n=f==null?void 0:f.parentElement)==null?void 0:n.children,_=Array.prototype.indexOf.call(u,f);(!u||_===u.length-1||_===-1)&&E(a)}};let k=m(!1);Z("keydown",J,function(...a){var i;(i=p()?B:void 0)==null||i.apply(this,a)}),ee(s,{get to(){return t(o)},onmove:async()=>{var a;await X(),r(k,!0),(a=t(v))==null||a.focus()},children:(a,i)=>{var n=ae();z(n,g=>r(v,g),()=>t(v));var f=y(n),u=y(f),_=y(u);_.__mousedown=E;var x=K(_,2);z(x,g=>r(C,g),()=>t(C)),x.__mousedown=[te,C,E];var L=y(x);Q(L,()=>t(k),g=>{var I=F(),Y=M(I);q(Y,()=>e.children,()=>E),D(g,I)}),w(x),w(u),w(f),w(n),P(()=>{N(n,"ready",t(k)),N(n,"layout_page",d()==="page"),U(n,"z-index",100+h())}),D(a,n)},$$slots:{default:!0}}),S()}G(["mousedown"]);export{re as D};
