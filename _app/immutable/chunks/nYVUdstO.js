import{t as I,a as D,e as G,c as H,d as J}from"./Ckbefv40.js";import{p as R,M as A,g as t,N as g,F as c,O as K,c as h,r as w,t as P,a as S,$ as Q,s as U,f as V}from"./D-3fTjYY.js";import{p as x,i as W}from"./t9At_Kmo.js";import{b as q,c as X,d as Y}from"./L33y2_sP.js";import{b as N}from"./BAsdY7MO.js";import{s as Z,i as $}from"./CsFJHB9r.js";const ee=(r=0)=>new Promise(e=>setTimeout(e,r));var te=I('<div class="teleport svelte-gjkzv5"><!></div>');function ae(r,e){R(e,!0);let s=g(void 0);A(()=>{t(s)&&e.to&&v(t(s),e.to)});let f=g(!1);const v=(d,o)=>{var b;c(f,!0),o.appendChild(d),(b=e.onmove)==null||b.call(e,d,o)};K(()=>{var d,o;(o=(d=t(s))==null?void 0:d.parentNode)==null||o.removeChild(t(s))});var m=te(),j=h(m);q(j,()=>e.children),w(m),N(m,d=>c(s,d),()=>t(s)),P(()=>m.hidden=!t(f)),D(r,m),S()}var oe=(r,e,s,f)=>{const v=r.target;t(e)&&(t(e)===v||!t(e).contains(v)||s()&&!v.closest(s()))&&f(r)},ie=I('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function ve(r,e){R(e,!0);const s=x(e,"layout",3,"centered"),f=x(e,"index",3,0),v=x(e,"active",3,!0),m=x(e,"content_selector",3,".pane"),j="body",d="fuz_dialog";let o=g(void 0);A(()=>{b(e.container)});const b=a=>{if(a)c(o,a,!0);else{const i=document.getElementById(d);if(i)c(o,i,!0);else{const n=document.querySelector(j);if(!n)throw Error(`Cannot find dialog root element with selector '${j}'`);c(o,document.createElement("div"),!0),t(o).id=d,t(o).style.display="contents",n.appendChild(t(o))}}};let E=g(void 0),C=g(void 0);const O=a=>{var i;a&&Z(a),(i=e.onclose)==null||i.call(e)},B=a=>{var i,n;if(a.key==="Escape"&&!$(a.target)){const u=(i=t(E))==null?void 0:i.parentElement,_=(n=u==null?void 0:u.parentElement)==null?void 0:n.children,y=Array.prototype.indexOf.call(_,u);(!_||y===_.length-1||y===-1)&&O(a)}};let k=g(!1);G("keydown",Q,function(...a){var i;(i=v()?B:void 0)==null||i.apply(this,a)}),ae(r,{get to(){return t(o)},onmove:async()=>{var a;await ee(),c(k,!0),(a=t(E))==null||a.focus()},children:(a,i)=>{var n=ie();let u,_;var y=h(n),T=h(y);T.__mousedown=[oe,C,m,O];var p=U(h(T),2),F=h(p);{var L=l=>{var z=H(),M=V(z);q(M,()=>e.children,()=>O),D(l,z)};W(F,l=>{t(k)&&l(L)})}w(p),N(p,l=>c(C,l),()=>t(C)),w(T),w(y),w(n),N(n,l=>c(E,l),()=>t(E)),P(l=>{u=X(n,1,"dialog svelte-4ojjtv",null,u,l),_=Y(n,"",_,{"z-index":100+f()})},[()=>({ready:t(k),layout_page:s()==="page"})]),D(a,n)},$$slots:{default:!0}}),S()}J(["mousedown"]);export{ve as D};
