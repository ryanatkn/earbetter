import{c as w,r as h,a as k,t as R,q as H,$ as J,s as I,d as K,f as M,u as Q}from"./disclose-version.C5EwI3-V.js";import{p as q,F as A,g as t,s as r,G as U,t as P,a as S,j as _}from"./index-client.Cqv4GYu1.js";import{a as m,p as T,i as V}from"./props.DNuZbuIM.js";import{c as B,t as N,b as W}from"./style.BTM4hw-r.js";import{b as D}from"./this.D7faLO31.js";import{s as X,i as Y}from"./index.C9T6NC4Z.js";const Z=(l=0)=>new Promise(e=>setTimeout(e,l));var $=R('<div class="teleport svelte-gjkzv5"><!></div>');function ee(l,e){q(e,!0);let d=_(void 0);A(()=>{t(d)&&e.to&&p(t(d),e.to)});let b=_(!1);const p=(o,c)=>{var v;r(b,!0),c.appendChild(o),(v=e.onmove)==null||v.call(e,o,c)};U(()=>{var o,c;(c=(o=t(d))==null?void 0:o.parentNode)==null||c.removeChild(t(d))});var s=$();D(s,o=>r(d,m(o)),()=>t(d));var E=w(s);B(E,()=>e.children),h(s),P(()=>s.hidden=!t(b)),k(l,s),S()}var te=(l,e,d)=>{l.target===t(e)&&d(l)},ae=R('<div class="dialog svelte-161ujlb" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-161ujlb"><div class="dialog_wrapper svelte-161ujlb"><div class="dialog_bg svelte-161ujlb" aria-hidden="true"></div> <div class="dialog_content svelte-161ujlb" role="none"><!></div></div></div></div>');function re(l,e){q(e,!0);const d=T(e,"layout",3,"centered"),b=T(e,"index",3,0),p=T(e,"active",3,!0),s="body",E="fuz_dialog";let o=_(void 0);A(()=>{c(e.container)});const c=a=>{if(a)r(o,m(a));else{const n=document.getElementById(E);if(n)r(o,m(n));else{const i=document.querySelector(s);if(!i)throw Error(`Cannot find dialog root element with selector '${s}'`);r(o,m(document.createElement("div"))),t(o).id=E,t(o).style.display="contents",i.appendChild(t(o))}}};let v=_(void 0),C=_(void 0);const x=a=>{var n;a&&X(a),(n=e.onclose)==null||n.call(e)},F=a=>{var n,i;if(a.key==="Escape"&&!Y(a.target)){const u=(n=t(v))==null?void 0:n.parentElement,f=(i=u==null?void 0:u.parentElement)==null?void 0:i.children,g=Array.prototype.indexOf.call(f,u);(!f||g===f.length-1||g===-1)&&x(a)}};let O=_(!1);H("keydown",J,function(...a){const n=p()?F:void 0;return n==null?void 0:n.apply(this,a)},!1),ee(l,{get to(){return t(o)},onmove:async()=>{var a;await Z(),r(O,!0),(a=t(v))==null||a.focus()},children:(a,n)=>{var i=ae();D(i,y=>r(v,m(y)),()=>t(v));var u=w(i),f=w(u),g=w(f);g.__mousedown=x;var j=I(I(g,!0));D(j,y=>r(C,m(y)),()=>t(C)),j.__mousedown=[te,C,x];var G=w(j);V(G,()=>t(O),y=>{var z=K(),L=M(z);B(L,()=>e.children,()=>x),k(y,z)}),h(j),h(f),h(u),h(i),P(()=>{N(i,"ready",t(O)),N(i,"layout_page",d()==="page"),W(i,"z-index",100+b())}),k(a,i)},$$slots:{default:!0}}),S()}Q(["mousedown"]);export{re as D};
