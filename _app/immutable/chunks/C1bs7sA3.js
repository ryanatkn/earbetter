import{t as N,a as D,e as W,c as F,d as H}from"./D6FQBtKd.js";import{p as R,T as A,g as t,V as g,G as c,W as J,c as h,a as w,t as P,d as S,$ as K,s as M,f as Q}from"./Drfw-9es.js";import{p as x,i as U}from"./CnDERkxj.js";import{b as q,c as X,d as Y}from"./wr1Q2OBW.js";import{b as z}from"./BIJQOs6A.js";import{s as Z,i as $}from"./HpLCJ4lA.js";const ee=(r=0)=>new Promise(e=>setTimeout(e,r));var te=N('<div class="teleport svelte-gjkzv5"><!></div>');function ae(r,e){R(e,!0);let s=g(void 0);A(()=>{t(s)&&e.to&&v(t(s),e.to)});let f=g(!1);const v=(d,o)=>{var b;c(f,!0),o.appendChild(d),(b=e.onmove)==null||b.call(e,d,o)};J(()=>{var d,o;(o=(d=t(s))==null?void 0:d.parentNode)==null||o.removeChild(t(s))});var m=te(),j=h(m);q(j,()=>e.children),w(m),z(m,d=>c(s,d),()=>t(s)),P(()=>m.hidden=!t(f)),D(r,m),S()}var oe=(r,e,s,f)=>{const v=r.target;t(e)&&(t(e)===v||!t(e).contains(v)||s()&&!v.closest(s()))&&f(r)},ie=N('<div role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-4ojjtv"><div class="dialog_wrapper svelte-4ojjtv" role="none"><div class="dialog_bg svelte-4ojjtv" aria-hidden="true"></div> <div class="dialog_content svelte-4ojjtv"><!></div></div></div></div>');function ve(r,e){R(e,!0);const s=x(e,"layout",3,"centered"),f=x(e,"index",3,0),v=x(e,"active",3,!0),m=x(e,"content_selector",3,".pane"),j="body",d="fuz_dialog";let o=g(void 0);A(()=>{b(e.container)});const b=a=>{if(a)c(o,a,!0);else{const i=document.getElementById(d);if(i)c(o,i,!0);else{const n=document.querySelector(j);if(!n)throw Error(`Cannot find dialog root element with selector '${j}'`);c(o,document.createElement("div"),!0),t(o).id=d,t(o).style.display="contents",n.appendChild(t(o))}}};let E=g(void 0),C=g(void 0);const T=a=>{var i;a&&Z(a),(i=e.onclose)==null||i.call(e)},B=a=>{var i,n;if(a.key==="Escape"&&!$(a.target)){const u=(i=t(E))==null?void 0:i.parentElement,_=(n=u==null?void 0:u.parentElement)==null?void 0:n.children,y=Array.prototype.indexOf.call(_,u);(!_||y===_.length-1||y===-1)&&T(a)}};let k=g(!1);W("keydown",K,function(...a){var i;(i=v()?B:void 0)==null||i.apply(this,a)}),ae(r,{get to(){return t(o)},onmove:async()=>{var a;await ee(),c(k,!0),(a=t(E))==null||a.focus()},children:(a,i)=>{var n=ie();let u,_;var y=h(n),O=h(y);O.__mousedown=[oe,C,m,T];var p=M(h(O),2),G=h(p);{var L=l=>{var I=F(),V=Q(I);q(V,()=>e.children,()=>T),D(l,I)};U(G,l=>{t(k)&&l(L)})}w(p),z(p,l=>c(C,l),()=>t(C)),w(O),w(y),w(n),z(n,l=>c(E,l),()=>t(E)),P(l=>{u=X(n,1,"dialog svelte-4ojjtv",null,u,l),_=Y(n,"",_,{"z-index":100+f()})},[()=>({ready:t(k),layout_page:s()==="page"})]),D(a,n)},$$slots:{default:!0}}),S()}H(["mousedown"]);export{ve as D};
